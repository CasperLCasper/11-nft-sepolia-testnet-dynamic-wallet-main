<!DOCTYPE html>
<html lang="lv">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Dynamic Wallet Visualizer — Sepolia NFT Access</title>

  <!-- Font -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet" />

  <style>
    body { font-family:'Inter',Arial,sans-serif; background:#000; color:#fff; margin:0; padding:20px; position: relative; }
    .container { max-width:1400px; margin:auto; display:flex; flex-direction:column; align-items:center; gap:12px; }
    h1 { font-size:36px; margin:0; line-height:1; background:linear-gradient(90deg,#ffffff,#aaaaaa); -webkit-background-clip:text; -webkit-text-fill-color:transparent; text-align:center; }
    .subtitle { margin-top:4px; color:#9fb0c3; font-size:18px; text-align:center; }
    .controls { display:flex; gap:10px; flex-wrap:wrap; justify-content:center; }
    button { padding:12px 20px; border-radius:12px; border:none; cursor:pointer; background:linear-gradient(90deg,#4a90e2,#9013fe); color:#fff; font-weight:700; font-size:16px; box-shadow:0 6px 18px rgba(0,0,0,0.45); transition: transform 0.2s, box-shadow 0.2s; }
    button:disabled { background:#444; cursor:not-allowed; box-shadow:0 6px 18px rgba(0,0,0,0.2); }
    button:hover:not(:disabled) { transform:translateY(-4px) scale(1.03); box-shadow:0 8px 22px rgba(0,0,0,0.65); }
    .snapshot-container { width:100%; background:#000; border-radius:14px; padding:18px; box-shadow:0 12px 40px rgba(0,0,0,0.6); position:relative; }
    #snapshotCanvas { width:100%; border-radius:10px; border:1px solid rgba(255,255,255,0.03); display:block; margin-bottom:12px; }
    #recordTimer { margin-top:6px; color:#0ff; font-weight:600; font-size:16px; text-align:center; }
    #statusContainer { position: relative; width: 100%; height: 40px; margin-top: 8px; }
    .status { font-weight:600; font-size:16px; color:#fff; line-height:40px; text-align:center; }
    #progressBarContainer { position: absolute; top: 50%; left: 50%; width: 60%; height: 18px; background: rgba(255,255,255,0.1); border-radius: 6px; transform: translate(-50%, -50%); display: none; overflow: hidden; }
    #progressBar { height: 100%; width: 100%; background: linear-gradient(90deg,#0ff,#4a90e2); border-radius: 6px; transform: scaleX(0); transform-origin: left center; transition: transform 0.4s ease; }
    #overlay { display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.7); z-index:999; }
    #recordDropdown { display:none; position: fixed; top:50%; left:50%; transform:translate(-50%,-50%); background:#111; border:2px solid #555; border-radius:12px; padding:80px 20px 20px 20px; z-index:1000; min-width:360px; box-shadow:0 8px 24px rgba(0,0,0,0.7); text-align:center; overflow-y:auto; }
    #recordDropdown button { width:100%; margin:16px 0; }
    #dropdownClose { position:absolute; top:10px; right:10px; cursor:pointer; font-size:28px; font-weight:bold; color:#fff; background:none; border:none; padding:0; line-height:1; }
    #fullscreenIcon { position:absolute; top:10px; right:10px; display:flex; align-items:center; cursor:pointer; color:#0ff; background:rgba(0,0,0,0.3); border-radius:6px; padding:6px 10px; transition: background 0.2s, transform 0.2s; z-index:10; user-select:none; }
    #fullscreenIcon:hover { background:rgba(0,255,255,0.2); transform: scale(1.05); }
    #fullscreenText { font-family:'Inter',Arial,sans-serif; white-space: nowrap; margin-left:6px; font-size:16px; font-weight:600; }
    #toggleInfoIcon { position:absolute; top:10px; left:10px; display:flex; align-items:center; cursor:pointer; color:#0ff; background:rgba(0,0,0,0.3); border-radius:6px; padding:6px 10px; transition: background 0.2s, transform 0.2s; z-index:10; user-select:none; }
    #toggleInfoIcon:hover { background:rgba(0,255,255,0.2); transform: scale(1.05); }
    #infoText { font-family:'Inter',Arial,sans-serif; white-space: nowrap; margin-left:6px; font-size:16px; font-weight:600; }
    #accountDisplay { width:100%; word-break:break-word; margin-top:8px; font-size:16px; text-align:center; }

    #tokenListContainer {
      display:none;
      position:absolute;
      top:80px;
      left:10px;
      max-height:150px;
      width:90%;
      max-width:576px;
      background:rgba(0,0,0,0.5);
      border-radius:9px;
      overflow-y:auto;
      padding:10px;
      color:#fff;
      font-family:'Inter',Arial,sans-serif;
      font-size:14px;
      z-index:15;
    }
    #tokenListContainer table { width:100%; border-collapse:collapse; }
    #tokenListContainer th, #tokenListContainer td { padding:6px 8px; text-align:left; font-size:13px; }
    #tokenListContainer th { color:#0ff; font-weight:600; }
    #tokenListContainer tr:nth-child(even) td { background:rgba(255,255,255,0.05); }
    #tokenListContainer tr:nth-child(odd) td { background:rgba(255,255,255,0.02); }
    #tokenListContainer::-webkit-scrollbar { width:6px; }
    #tokenListContainer::-webkit-scrollbar-thumb { background:#0ff; border-radius:3px; }
    #tokenListContainer::-webkit-scrollbar-track { background:#222; border-radius:3px; }

     .site-header {
    display: flex;
    align-items: center;
    gap: 20px;        /* atstarpe starp logo un tekstu */
  }

  .logo {
    position: absolute;
    top: 40px;   /* attālums no augšas */
    left: 80px;  /* attālums no kreisās */
    width: 90px;
}

  </style>
</head>

<body>
  <div class="container" role="main">
    <header class="site-header">

        <img 
          src="data:image/png;base64,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"
          alt="Logo"
            class="logo"
        >

        <div class="header-text">
            <h1>Dynamic Wallet Visualizer</h1>
            <p class="subtitle">Watch your Ethereum assets come alive — Sepolia NFT Access</p>
        </div>

    </header>

    <section class="controls" aria-label="Controls">
      <button id="connectBtn">Connect Wallet</button>
      <button id="renderBtn" disabled>Render Snapshot</button>
      <button id="recordBtn" disabled>Record 20s HD Video</button>
    </section>

    <div id="accountDisplay" aria-live="polite">Connected account: —</div>
    <div id="statusContainer" aria-hidden="false">
      <div id="statusMsg" class="status" role="status" aria-live="polite"></div>
      <div id="progressBarContainer" aria-hidden="true"><div id="progressBar"></div></div>
    </div>
    <div id="recordTimer" aria-live="polite">Recording: 0 / 20 s</div>

    <section class="snapshot-container" aria-label="Snapshot">
      <canvas id="snapshotCanvas" width="1920" height="1080" aria-label="Visualization canvas"></canvas>
      <div id="fullscreenIcon" role="button" tabindex="0" aria-label="Toggle fullscreen">⤢ <span id="fullscreenText">Fullscreen</span></div>
      <div id="toggleInfoIcon" role="button" tabindex="0" aria-label="Toggle info">ℹ <span id="infoText">Info</span></div>

      <div id="tokenListContainer" aria-hidden="true">
        <table>
          <thead><tr><th>Address</th><th>Balance</th></tr></thead>
          <tbody id="tokenListContent"></tbody>
        </table>
      </div>
    </section>
  </div>

  <div id="overlay" tabindex="-1"></div>

  <div id="recordDropdown" role="dialog" aria-modal="true" aria-hidden="true">
    <button id="dropdownClose" aria-label="Close">&times;</button>
    <button id="recordWithTokensBtn">Record video with token list</button>
    <button id="recordWithoutTokensBtn">Record video without token list</button>
  </div>

  <!-- External libs -->
  <script src="https://cdn.jsdelivr.net/npm/ethers@6/dist/ethers.umd.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@walletconnect/web3-provider@1.8.0/dist/umd/index.min.js"></script>

  <script>
    // ===== Canvas setup =====
    const isMobile = /Mobi|Android/i.test(navigator.userAgent);
    const canvas = document.getElementById('snapshotCanvas');
    const ctx = canvas.getContext('2d');
    function resizeCanvas() {
      const dpr = window.devicePixelRatio || 1;
      const scale = isMobile ? 0.6 : 1;
      canvas.width = Math.round(1920*dpr*scale);
      canvas.height = Math.round(1080*dpr*scale);
      canvas.style.width = '100%';
      canvas.style.height = 'auto';
      ctx.setTransform(1,0,0,1,0,0);
      ctx.scale(dpr*scale, dpr*scale);
    }
    window.addEventListener('resize', resizeCanvas);
    resizeCanvas();

    // ===== Variables =====
    const NFT_CONTRACT = "0x1EF02c3Ed33a98c10F0bf1fd71e4D226e8e408A5";
    const providerRpcUrl = "https://eth-sepolia.g.alchemy.com/v2/YOUR_ALCHEMY_KEY";
    let provider, signer, account, wcProvider;
    let showInfo = true;
    let tokens=[], ethBalance=0, txCount=0, particles=[], initialParticles=[], animRequest=null;
    let walletSeed=0;

    const connectBtn = document.getElementById('connectBtn');
    const renderBtn = document.getElementById('renderBtn');
    const recordBtn = document.getElementById('recordBtn');
    const accountDisplay = document.getElementById('accountDisplay');
    const recordTimer = document.getElementById('recordTimer');
    const statusMsg = document.getElementById('statusMsg');
    const overlay = document.getElementById('overlay');
    const recordDropdown = document.getElementById('recordDropdown');
    const dropdownClose = document.getElementById('dropdownClose');
    const recordWithTokensBtn = document.getElementById('recordWithTokensBtn');
    const recordWithoutTokensBtn = document.getElementById('recordWithoutTokensBtn');
    const fullscreenIcon = document.getElementById('fullscreenIcon');
    const toggleInfoIcon = document.getElementById('toggleInfoIcon');
    const progressBarContainer = document.getElementById('progressBarContainer');
    const progressBar = document.getElementById('progressBar');
    const tokenListContainer = document.getElementById('tokenListContainer');
    const tokenListContent = document.getElementById('tokenListContent');

    // ===== Helpers =====
    function showProgressSmooth(){ progressBarContainer.style.display='block'; progressBar.style.transform='scaleX(0)'; }
    function hideProgressSmooth(){ progressBar.style.transform='scaleX(1)'; setTimeout(()=>{progressBarContainer.style.display='none'; progressBar.style.transform='scaleX(0)';},500); }
    function hashStringToInt(str,mod=1000){ let h=2166136261>>>0; for(let i=0;i<str.length;i++){h^=str.charCodeAt(i);h=Math.imul(h,16777619)>>>0;} return h%mod; }
    function seededRandomFloat(seedStr){ return hashStringToInt(seedStr,10000)/10000; }

    // ===== Particles =====
    async function initParticlesOnce(){
      initialParticles=[];
      const particleCount = Math.min(150,50+(tokens.length||0)*15);
      const seedBase = (account||'')+String(ethBalance)+String(txCount);
      for(let i=0;i<particleCount;i++){
        const t = tokens.length ? tokens[i%tokens.length] : {balance:1,address:String(i),symbol:'T'};
        const balanceFactor = t.isNFT ? 1 : Math.min(t.balance||0,20)/20;
        let hue = hashStringToInt((t.address||'')+seedBase+i)%360;
        const ethFactor = Math.min(ethBalance/10,1); hue=(hue+ethFactor*100)%360;
        const speed=0.005+0.01*(hashStringToInt((t.symbol||t.address)+seedBase+i,10)/10);
        const r=t.isNFT?10:2+6*balanceFactor;
        const angle=seededRandomFloat(seedBase+i+'angle')*2*Math.PI;
        const radius=50+seededRandomFloat(seedBase+i+'radius')*400;
        initialParticles.push({angle,radius,r,hue,speed,token:t});
      }
    }
    function cloneParticles(){ return initialParticles.map(p=>({...p})); }

    // ===== Draw frame =====
    function drawFrame(frame,showTokensFrame){
      const dpr = window.devicePixelRatio || 1;
      const scale = isMobile ? 0.6 : 1;
      const W = canvas.width/(dpr*scale);
      const H = canvas.height/(dpr*scale);
      ctx.clearRect(0,0,W,H);
      ctx.fillStyle='#000'; ctx.fillRect(0,0,W,H);
      const cx0=W/2, cy0=H/2;

      for(let i=0;i<particles.length;i++){
        for(let j=i+1;j<particles.length;j++){
          const p1=particles[i], p2=particles[j];
          const x1=cx0+Math.cos(p1.angle)*p1.radius;
          const y1=cy0+Math.sin(p1.angle)*p1.radius;
          const x2=cx0+Math.cos(p2.angle)*p2.radius;
          const y2=cy0+Math.sin(p2.angle)*p2.radius;
          const dx=x1-x2, dy=y1-y2;
          const dist=Math.sqrt(dx*dx+dy*dy);
          if(dist<120){
            const avgBalance=(Math.min(p1.token.balance,20)+Math.min(p2.token.balance,20))/40;
            const alpha=0.2+0.4*avgBalance*(1-dist/200);
            ctx.lineWidth=1.5+2*avgBalance;
            const txFactor=Math.log(txCount+1)/10;
            const hue=(p1.hue+p2.hue)/2+frame*0.4*txFactor;
            ctx.strokeStyle=`hsla(${hue},100%,70%,${alpha})`;
            ctx.beginPath(); ctx.moveTo(x1,y1); ctx.lineTo(x2,y2); ctx.stroke();
          }
        }
      }

      particles.forEach(p=>{
        p.angle+=p.speed;
        const cx=cx0+Math.cos(p.angle)*p.radius;
        const cy=cy0+Math.sin(p.angle)*p.radius;
        const gradient=ctx.createRadialGradient(cx,cy,0,cx,cy,p.r*2.5);
        gradient.addColorStop(0,`hsla(${p.hue},100%,70%,1)`);
        gradient.addColorStop(0.5,`hsla(${p.hue+20},100%,60%,0.9)`);
        gradient.addColorStop(1,`hsla(${p.hue+40},100%,40%,0.5)`);
        ctx.fillStyle=gradient; ctx.beginPath(); ctx.arc(cx,cy,p.r,0,Math.PI*2); ctx.fill();
      });

      if(showTokensFrame && showInfo){
        ctx.fillStyle='#0ff';
        ctx.font='22px Inter';
        ctx.fillText(`SepoliaETH: ${ethBalance.toFixed(4)}`,10,80);
      }
    }

    // ===== Token UI =====
    function updateTokenListUI() {
      if(!tokens || tokens.length===0){ tokenListContent.innerHTML='<tr><td colspan="2" style="color:#777;">No tokens</td></tr>'; return; }
      tokenListContent.innerHTML='';
      tokens.forEach(t=>{
        const tr=document.createElement('tr');
        const addrTd=document.createElement('td'); addrTd.textContent=t.address; addrTd.title=t.address;
        const balTd=document.createElement('td'); balTd.textContent=t.balance.toFixed(4);
        tr.appendChild(addrTd); tr.appendChild(balTd);
        tokenListContent.appendChild(tr);
      });
    }

    // ===== Wallet & NFT =====
    async function checkNFTAccess(){
      if(!account) return false;
      showProgressSmooth();
      try{
        const res=await fetch(`/api/getNFTs?account=${encodeURIComponent(account)}`);
        const data=await res.json();
        return data?.ownsNFT===true;
      }catch(err){ console.error(err); return false; }
      finally{ hideProgressSmooth(); }
    }

    async function getTokens(){
      if(!account) return [];
      showProgressSmooth();
      try{
        const res=await fetch(`/api/getTokens?account=${encodeURIComponent(account)}`);
        if(!res.ok){ statusMsg.textContent='Token API unavailable — fallback'; return []; }
        const data=await res.json();
        if(!data?.result?.tokenBalances) return [];
        return data.result.tokenBalances.map(t=>{
          const decimals=t.tokenDecimals!=null?Number(t.tokenDecimals):18;
          const balance=Number(ethers.formatUnits(t.tokenBalance||"0x0",decimals));
          const address=(t.tokenAddress||t.contractAddress||"").toLowerCase();
          return {address,balance,symbol:t.symbol||address};
        }).filter(t=>t.balance>0);
      }catch(e){ console.error(e); statusMsg.textContent='Failed fetching tokens'; return []; }
      finally{ hideProgressSmooth(); }
    }

    async function getAllNFTs(){
      if(!account) return [];
      showProgressSmooth();
      try{
        const res=await fetch(`/api/getAllNFTs?account=${encodeURIComponent(account)}`);
        if(!res.ok) return [];
        const data=await res.json();
        if(!data?.nfts) return [];
        return data.nfts.map(nft=>({
          address:nft.contract.address,
          symbol:nft.contract.symbol||'NFT',
          balance:1,
          isNFT:true,
          tokenId:nft.id.tokenId
        }));
      }catch(e){ console.error(e); return []; }
      finally{ hideProgressSmooth(); }
    }

    // ===== Connect Wallet =====
    async function connectWallet(){
      showProgressSmooth();
      try{
        if(window.ethereum){
          provider=new ethers.BrowserProvider(window.ethereum,"sepolia");
          await provider.send("eth_requestAccounts",[]);
          signer=await provider.getSigner();
          account=await signer.getAddress();
        } else {
          wcProvider=new WalletConnectProvider.default({ rpc:{11155111:providerRpcUrl} });
          await wcProvider.enable();
          provider=new ethers.BrowserProvider(wcProvider,"sepolia");
          signer=await provider.getSigner();
          account=await signer.getAddress();
        }

        accountDisplay.textContent='Connected account: '+account;
        walletSeed=hashStringToInt(account);

        const hasNFT = await checkNFTAccess();
        if(hasNFT){
          renderBtn.disabled=false;
          recordBtn.disabled=false;
          statusMsg.textContent='Wallet connected & NFT verified — access granted.';
        } else {
          renderBtn.disabled=true;
          recordBtn.disabled=true;
          statusMsg.textContent='NFT not found — access denied.';
          alert('Access denied — required NFT not found.');
        }

      }catch(err){
        console.error(err);
        statusMsg.textContent='Wallet connection failed.';
        alert('Wallet connection failed. Retry.');
      }finally{ hideProgressSmooth(); }
    }

    // ===== Render Snapshot =====
    async function renderSnapshot(){
      if(!account) await connectWallet();
      if(!provider || !account){ statusMsg.textContent='Wallet not connected.'; return; }

      stopAnimation();
      showProgressSmooth();
      progressBar.style.transform='scaleX(0)';
      statusMsg.textContent='';

      const steps=[
        {name:'Fetching ETH balance', func: async()=>{ ethBalance=Number(ethers.formatEther(await provider.getBalance(account)))||0; }},
        {name:'Fetching transaction count', func: async()=>{ txCount=Number(await provider.getTransactionCount(account))||0; }},
        {name:'Fetching tokens', func: async()=>{ tokens=[...await getTokens()]; }},
        {name:'Fetching NFTs', func: async()=>{ tokens=[...tokens,...await getAllNFTs()]; }},
        {name:'Initializing particles', func: async()=>{ await initParticlesOnce(); particles=cloneParticles(); }}
      ];

      let currentStep=0, totalSteps=steps.length;
      let visualProgress=0, running=true;

      function animateProgress(){
        if(!running) return;
        const targetProgress=currentStep/totalSteps;
        visualProgress+=(targetProgress-visualProgress)*0.05;
        progressBar.style.transform=`scaleX(${visualProgress})`;
        requestAnimationFrame(animateProgress);
      }
      requestAnimationFrame(animateProgress);

      try{
        for(const step of steps){
          statusMsg.textContent=step.name+'...';
          await step.func();
          currentStep++;
        }

        if(showInfo){ tokenListContainer.style.display='block'; updateTokenListUI(); }

        running=false; progressBar.style.transform='scaleX(1)'; statusMsg.textContent='Visualization running!';
        hideProgressSmooth();
        animate();
      }catch(e){ running=false; hideProgressSmooth(); console.error(e); statusMsg.textContent='Error rendering visualization.'; alert('Render failed. Check console.'); }
    }

    // ===== Animation =====
    function animate(frame=0){ drawFrame(frame,true); animRequest=requestAnimationFrame(()=>animate(frame+1)); }
    function stopAnimation(){ if(animRequest) cancelAnimationFrame(animRequest); animRequest=null; }

    // ===== Event Listeners =====
    connectBtn.addEventListener('click', connectWallet);
    renderBtn.addEventListener('click', renderSnapshot);
    fullscreenIcon.addEventListener('click', ()=>{ if(!document.fullscreenElement) canvas.requestFullscreen().catch(()=>{}); else document.exitFullscreen().catch(()=>{}); });
    toggleInfoIcon.addEventListener('click', ()=>{
      showInfo=!showInfo;
      document.getElementById('infoText').textContent=showInfo?'Info':'Hidden';
      tokenListContainer.style.display=showInfo?'block':'none';
      if(showInfo) updateTokenListUI();
    });

    // ===== Video Recording =====
    function pickSupportedMimeType(){
      const candidates=['video/webm;codecs=vp9','video/webm;codecs=vp8','video/webm','video/mp4'];
      for(const c of candidates){ try{ if(MediaRecorder.isTypeSupported && MediaRecorder.isTypeSupported(c)) return c; }catch(e){} }
      return '';
    }

    async function startRecording(includeTokens=false){
      if(startRecording._recording) return;
      startRecording._recording=true;
      const previousShowInfo=showInfo;
      showInfo=false;
      if(includeTokens){ tokenListContainer.style.display='block'; document.getElementById('infoText').textContent='Info'; }
      stopAnimation(); particles=cloneParticles(); drawFrame(0,true);
      statusMsg.textContent='Preparing recording...';
      recordBtn.disabled=true; renderBtn.disabled=true; connectBtn.disabled=true;
      showProgressSmooth(); if(!animRequest) animate();

      let stream; try{ stream=canvas.captureStream(30); }catch(err){ statusMsg.textContent='Recording not supported.'; cleanup(); return; }

      const mime=pickSupportedMimeType(); let recorder;
      try{ recorder=mime?new MediaRecorder(stream,{mimeType:mime}):new MediaRecorder(stream); }catch(err){ alert('MediaRecorder not available.'); cleanup(); return; }

      const chunks=[]; recorder.ondataavailable=(e)=>{ if(e.data&&e.data.size) chunks.push(e.data); };
      recorder.onerror=(ev)=>{ console.error(ev); statusMsg.textContent='Recording error.'; };
      recorder.onstart=()=>{ statusMsg.textContent='Recording...'; };
      recorder.start();

      const startTime=performance.now(), duration=20000;
      function updateProgress(timestamp){
        const elapsed=timestamp-startTime;
        const progress=Math.min(elapsed/duration,1);
        progressBar.style.transform=`scaleX(${progress})`;
        const seconds=Math.floor(elapsed/1000);
        recordTimer.textContent=`Recording: ${seconds} / 20 s`;
        if(elapsed<duration) requestAnimationFrame(updateProgress); else try{ recorder.stop(); }catch(e){}
      }
      requestAnimationFrame(updateProgress);

      recorder.onstop=()=>{
        const blob=new Blob(chunks,{type:chunks.length?chunks[0].type:'video/webm'});
        const url=URL.createObjectURL(blob);
        const a=document.createElement('a'); a.style.display='none'; a.href=url;
        const ext=blob.type.includes('mp4')?'mp4':'webm';
        a.download=`wallet_visualization.${ext}`; document.body.appendChild(a); a.click();
        setTimeout(()=>{document.body.removeChild(a); URL.revokeObjectURL(url);},100);
        showInfo=previousShowInfo;
        document.getElementById('infoText').textContent=showInfo?'Info':'Hidden';
        tokenListContainer.style.display=showInfo?'block':'none';
        updateTokenListUI();
        statusMsg.textContent='Recording finished!'; recordTimer.textContent='Recording: 0 / 20 s';
        hideProgressSmooth(); recordBtn.disabled=false; renderBtn.disabled=false; connectBtn.disabled=false;
        startRecording._recording=false;
      };

      function cleanup(){
        try{ if(recorder && recorder.state==='recording') recorder.stop(); }catch(e){}
        showInfo=previousShowInfo;
        document.getElementById('infoText').textContent=showInfo?'Info':'Hidden';
        tokenListContainer.style.display=showInfo?'block':'none';
        updateTokenListUI();
        recordBtn.disabled=false; renderBtn.disabled=false; connectBtn.disabled=false;
        hideProgressSmooth(); recordTimer.textContent='Recording: 0 / 20 s';
        startRecording._recording=false;
      }
    }

    recordBtn.addEventListener('click',()=>startRecording(true));
  </script>
</body>
</html>

















































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































